# 🚀 Scrcpy 智能启动器

一个基于 Rust 开发的智能 scrcpy 启动器，提供现代化的终端用户界面（TUI），实时监控 Android 设备连接并自动启动 scrcpy。

## ✨ 主要功能

### 🖥️ 现代化 TUI 界面
- 基于 Ratatui 构建的美观终端界面
- 实时状态显示和日志输出
- 设备连接状态可视化
- 支持键盘快捷键操作

### 📱 智能设备管理
- 实时监控 Android 设备连接状态
- 设备连接时自动启动 scrcpy
- 设备断开时自动清理进程
- 支持多设备识别和管理
- 智能设备状态检测

### 🔒 单实例保护
- 防止多个程序实例同时运行
- 确保资源不冲突
- Windows 系统级单实例检查

### 🎯 用户友好
- 完全中文界面
- 清晰的状态提示和日志分类
- 简单的操作方式
- 详细的运行时信息

## 🚀 快速开始

### 直接运行
```bash
# 下载并运行编译好的程序（已内置 scrcpy）
.\scrcpy-launcher.exe
```

> 💡 **注意**：程序已自动打包 scrcpy，无需额外安装！


## 📋 系统要求

- **操作系统**：Windows 10/11
- **依赖软件**：无需额外安装（scrcpy 已内置）
- **设备要求**：USB 调试已启用的 Android 设备
- **网络**：无需网络连接（本地运行）

## 🔧 工作原理

1. **单实例检查**：确保只有一个程序实例运行
2. **TUI 初始化**：启动现代化终端界面
3. **scrcpy 检测**：检查本地 scrcpy 安装状态
4. **设备监控**：持续监控 ADB 设备连接状态
5. **智能启动**：设备连接时自动启动 scrcpy
6. **进程管理**：设备断开时自动清理相关进程
7. **状态同步**：实时更新界面状态和日志

## 📁 项目结构

```
auto-scrcpy/
├── src/
│   ├── main.rs              # 主程序入口和业务逻辑
│   ├── device_monitor.rs    # 设备监控和 scrcpy 管理
│   ├── single_instance.rs   # 单实例保护
│   └── tui.rs              # 终端用户界面
├── target/release/
│   └── scrcpy-launcher.exe  # 编译后的可执行文件
├── Cargo.toml               # 项目配置
└── README.md                # 项目说明
```

## 🛠️ 技术栈

- **Rust** - 主要编程语言
- **Tokio** - 异步运行时
- **Ratatui** - 终端用户界面框架
- **Crossterm** - 跨平台终端操作
- **WinAPI** - Windows 系统 API 调用
- **Dirs** - 系统目录操作

## 📝 使用说明

### 基本操作
1. **启动程序**：双击运行 `scrcpy-launcher.exe`（已内置 scrcpy，开箱即用）
2. **连接设备**：使用 USB 连接 Android 设备并启用 USB 调试
3. **自动启动**：设备连接后程序会自动启动内置的 scrcpy
4. **退出程序**：按 `Ctrl+C` 或 `q` 键退出程序

### TUI 界面说明
- **状态区域**：显示当前程序运行状态
- **设备列表**：显示已连接的 Android 设备信息
- **日志区域**：显示详细的运行日志和操作记录
- **快捷键**：
  - `q` 或 `Ctrl+C`：退出程序
  - `↑/↓`：滚动日志内容

### 日志级别说明
- 🟢 **成功**：操作成功完成
- 🔵 **信息**：一般信息提示
- 🟡 **警告**：需要注意的情况
- 🔴 **错误**：操作失败或异常
- 📱 **设备**：设备相关信息
- 🚀 **启动**：程序启动相关

## 🐛 故障排除

### 常见问题

1. **程序无法启动**
   - 检查是否已有实例在运行
   - 确保有足够的系统权限
   - 检查 Windows 防病毒软件是否阻止

2. **设备未检测到**
   - 确保 USB 调试已启用
   - 检查 USB 驱动是否正确安装
   - 尝试重新连接设备
   - 确认设备已授权调试

3. **scrcpy 启动失败**
   - 检查程序内置的 scrcpy 文件是否完整
   - 确保内置的 adb.exe 和 scrcpy.exe 都存在
   - 检查设备是否已授权 USB 调试
   - 尝试重新下载完整的程序包

4. **TUI 界面显示异常**
   - 确保终端支持 UTF-8 编码
   - 调整终端窗口大小
   - 检查终端是否支持颜色显示

### 调试信息

程序会输出详细的运行日志，包括：
- 🔍 **系统检测**：单实例检查、scrcpy 可用性
- 📱 **设备状态**：设备连接、断开、识别信息
- 🚀 **启动过程**：scrcpy 启动、停止状态
- ❌ **错误信息**：详细的错误原因和建议


## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！


## 📄 许可证

MIT License

---

**享受无缝的 Android 屏幕镜像体验！** 🎉

> 💡 **提示**：如果你觉得这个项目有用，请给个 ⭐ Star 支持一下！